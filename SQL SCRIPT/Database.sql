--DROP DATABASE DBMSQL_BanHang
CREATE DATABASE DBMSQL_BanHang
GO
USE DBMSQL_BanHang
GO

CREATE TABLE DOITAC (
	MADOITAC VARCHAR(10),
	EMAIL VARCHAR(20),
	TENQUAN NVARCHAR(50),
	TP_QUAN NVARCHAR(50),
	LOAIAMTHUC NVARCHAR(20),
	DIACHI_KD NVARCHAR(50),
	SDT CHAR(10),
	MASOTHUE VARCHAR(20),
	MA_NDD VARCHAR(10)
	--SL_DONHANG INT

	CONSTRAINT "PK_DOITAC" PRIMARY KEY(MADOITAC)
)
GO

CREATE TABLE NGUOIDAIDIEN (
	MA_NDD VARCHAR(10),
	TEN_NDD NVARCHAR(50)

	CONSTRAINT "PK_NGUOIDAIDIEN" PRIMARY KEY(MA_NDD)
)
GO

CREATE TABLE HOPDONG (
	MAHOPDONG VARCHAR(10),
	MA_NDD VARCHAR(10),
	NV_XULI VARCHAR(10),
	--SL_CHINHANH INT,
	PT_HOAHONG FLOAT,
	PHIKICHHOAT FLOAT,
	TG_HIEULUC DATETIME

	CONSTRAINT "PK_HOPDONG" PRIMARY KEY(MAHOPDONG)
)
GO

CREATE TABLE CT_HOPDONG (
	MAHOPDONG VARCHAR(10),
	MACHINHANH VARCHAR(10),

	CONSTRAINT "PK_CT_HOPDONG" PRIMARY KEY(MAHOPDONG, MACHINHANH)
)
GO

CREATE TABLE NHANVIEN(
	MANV VARCHAR(10),
	TENNV NVARCHAR(50)

	CONSTRAINT "PK_NHANVIEN" PRIMARY KEY(MANV)
)
GO

CREATE TABLE CHINHANH(
	MACHINHANH VARCHAR(10),
	DC_CHINHANH NVARCHAR(50),
	GIOMOCUA TIME,
	GIODONGCUA TIME,
	TT_CHINHANH NVARCHAR(20),
	--DOANHSO FLOAT,
	SOTAIKHOAN VARCHAR(14),
	TENNGANHANG NVARCHAR(50)

	CONSTRAINT "PK_CHINHANH" PRIMARY KEY(MACHINHANH)
)
ALTER TABLE CHINHANH ADD MADOITAC VARCHAR(10)
GO

CREATE TABLE THUCDON (
	MACHINHANH VARCHAR(10),
	TENMONAN NVARCHAR(50)

	CONSTRAINT "PK_THUCDON" PRIMARY KEY(MACHINHANH, TENMONAN)
)
GO

CREATE TABLE MONAN (
	TENMON NVARCHAR(50),
	MIEUTA NVARCHAR(50),
	GIA FLOAT

	CONSTRAINT "PK_MONAN" PRIMARY KEY(TENMON)
)
GO

CREATE TABLE TUYCHONMON (
	TENMON NVARCHAR(50),
	TUYCHON NVARCHAR(50),

	CONSTRAINT "PK_TUYCHON" PRIMARY KEY(TENMON, TUYCHON)
)
GO

CREATE TABLE TAIKHOAN_NH (
	SOTAIKHOAN VARCHAR(14),
	TENNGANHANG NVARCHAR(50),
	CHINHANH_NH NVARCHAR(50)

	CONSTRAINT "PK_TAIKHOAN_NH" PRIMARY KEY(SOTAIKHOAN, TENNGANHANG)
)
GO

CREATE TABLE TAIXE (
	MATAIXE VARCHAR(10),
	HOTEN NVARCHAR(50),
	CMND CHAR(10),
	SDT CHAR(10),
	DIACHI NVARCHAR(50),
	EMAIL VARCHAR(20),
	BIENSOXE VARCHAR(10),
	PHITHUECHAN FLOAT,
	KHUVUCHD NVARCHAR(50),
	SOTAIKHOAN VARCHAR(14),
	TENNGANHANG NVARCHAR(50)

	CONSTRAINT "PK_TAIXE" PRIMARY KEY(MATAIXE)
)
GO

CREATE TABLE DONHANG (
	MADONHANG VARCHAR(10),
	CHINHANH VARCHAR(10),
	KHACHHANG VARCHAR(10),
	TAIXEXULI VARCHAR(10),
	NGAYLAP DATETIME,
	HINHTHUCTHANHTOAN NVARCHAR(20),
	TINHTRANG NVARCHAR(20),
	PHIVANCHUYEN FLOAT,
	TONGTIEN FLOAT

	CONSTRAINT "PK_DONHANG" PRIMARY KEY(MADONHANG)
)
GO

CREATE TABLE CT_DONHANG (
	MADONHANG VARCHAR(10),
	MACHINHANH VARCHAR(10),
	TENMON NVARCHAR(50),
	SOLUONG INT

	CONSTRAINT "PK_CT_DONHANG" PRIMARY KEY(MADONHANG, MACHINHANH, TENMON)
)
GO

CREATE TABLE KHACHHANG (
	MAKH VARCHAR(10),
	HOTEN NVARCHAR(50),
	SDT CHAR(10),
	DIACHI NVARCHAR(50),
	EMAIL VARCHAR(20)

	CONSTRAINT "PK_KHACHHANG" PRIMARY KEY(MAKH)
)
GO

CREATE TABLE BANGDANHGIA (
	MABANG VARCHAR(10),
	MAKH VARCHAR(10),
	TENMON NVARCHAR(50),
	LIKEE BIT,
	COMMENT NVARCHAR(50),
	RATE INT

	CONSTRAINT "PK_BANGDANHGIA" PRIMARY KEY(MABANG, MAKH, TENMON)
)
GO

-- KHÓA NGOẠI -- 
-- ĐỐI TÁC - NGƯỜI ĐẠI DIỆN
ALTER TABLE DOITAC 
ADD CONSTRAINT "FK_DOITAC_NGUOIDAIDIEN" FOREIGN KEY(MA_NDD) 
REFERENCES NGUOIDAIDIEN (MA_NDD)
GO

-- HỢP ĐỒNG - NGƯỜI ĐẠI DIỆN
ALTER TABLE HOPDONG
ADD CONSTRAINT "FK_HOPDONG_NGUOIDAIDIEN" FOREIGN KEY(MA_NDD)
REFERENCES NGUOIDAIDIEN (MA_NDD)
GO

-- HỢP ĐỒNG - NHÂN VIÊN
ALTER TABLE HOPDONG
ADD CONSTRAINT "FK_HOPDONG_NHANVIEN" FOREIGN KEY(NV_XULI)
REFERENCES NHANVIEN (MANV)
GO

-- CT_HOPDONG - HOPDONG
ALTER TABLE CT_HOPDONG 
ADD CONSTRAINT "FK_CT_HOPDONG_HOPDONG" FOREIGN KEY(MAHOPDONG)
REFERENCES HOPDONG (MAHOPDONG)
GO

-- CT_HOPDONG - CHINHANH
ALTER TABLE CT_HOPDONG
ADD CONSTRAINT "FK_CT_HOPDONG_CHINHANH" FOREIGN KEY(MACHINHANH)
REFERENCES CHINHANH (MACHINHANH)
GO

-- CHINHANH - TAIKHOANNGANHANG
ALTER TABLE CHINHANH
ADD CONSTRAINT "FK_CHINHANH_TAIKHOAN_NH" FOREIGN KEY(SOTAIKHOAN, TENNGANHANG)
REFERENCES TAIKHOAN_NH(SOTAIKHOAN, TENNGANHANG)
GO

-- CHINHANH - DOITAC 
ALTER TABLE CHINHANH
ADD CONSTRAINT "FK_CHINHANH_DOITAC" FOREIGN KEY(MADOITAC)
REFERENCES DOITAC(MADOITAC)
GO

-- TAIXE - TAIKHOANNGANHANG
ALTER TABLE TAIXE
ADD CONSTRAINT "FK_TAIXE_TAIKHOAN_NH" FOREIGN KEY(SOTAIKHOAN, TENNGANHANG)
REFERENCES TAIKHOAN_NH(SOTAIKHOAN, TENNGANHANG)
GO

-- THUCDON - CHINHANH
ALTER TABLE THUCDON
ADD CONSTRAINT "FK_THUCDON_CHINHANH" FOREIGN KEY(MACHINHANH)
REFERENCES CHINHANH(MACHINHANH)
GO

-- THUCDON - MONAN
ALTER TABLE THUCDON
ADD CONSTRAINT "FK_THUCDON_MONAN" FOREIGN KEY(TENMONAN)
REFERENCES MONAN(TENMON)
GO

-- TUYCHONMON - MONAN
ALTER TABLE TUYCHONMON 
ADD CONSTRAINT "FK_TUYCHONMON_MONAN" FOREIGN KEY(TENMON)
REFERENCES MONAN(TENMON)
GO

-- DONHANG - TAIXE
ALTER TABLE DONHANG
ADD CONSTRAINT "FK_DONHANG_TAIXE" FOREIGN KEY(TAIXEXULI)
REFERENCES TAIXE(MATAIXE)
GO

-- DONHANG - CHINHANH
ALTER TABLE DONHANG
ADD CONSTRAINT "FK_DONHANG_CHINHANH" FOREIGN KEY(CHINHANH)
REFERENCES CHINHANH(MACHINHANH)
GO

-- DONHANG - KHACHHANG
ALTER TABLE DONHANG
ADD CONSTRAINT "FK_DONHANG_KHACHHANG" FOREIGN KEY(KHACHHANG)
REFERENCES KHACHHANG(MAKH)
GO

-- CT_DONHANG - DONHANG
ALTER TABLE CT_DONHANG
ADD CONSTRAINT "FK_CT_DONHANG_DONHANG" FOREIGN KEY(MADONHANG)
REFERENCES DONHANG(MADONHANG)
GO

-- CT_DONHANG - CHINHANH
ALTER TABLE CT_DONHANG
ADD CONSTRAINT "FK_CT_DONHANG_CHINHANH" FOREIGN KEY(MACHINHANH)
REFERENCES CHINHANH(MACHINHANH)
GO

-- CT_DONHANG - MONAN
ALTER TABLE CT_DONHANG
ADD CONSTRAINT "FK_CT_DONHANG_MONAN" FOREIGN KEY (TENMON)
REFERENCES MONAN(TENMON)
GO

-- BANGDANHGIA - KHACHHANG
ALTER TABLE BANGDANHGIA
ADD CONSTRAINT "FK_BANGDANHGIA_KHACHHANG" FOREIGN KEY(MAKH)
REFERENCES KHACHHANG(MAKH)
GO

-- BANGDANHGIA - MONAN
ALTER TABLE BANGDANHGIA
ADD CONSTRAINT "FK_BANGDANHGIA_MONAN" FOREIGN KEY(TENMON)
REFERENCES MONAN(TENMON)
GO

CREATE TABLE TAIKHOAN (
	TAIKHOAN VARCHAR(20),
	MATKHAU VARCHAR(20),
	LOAITAIKHOAN CHAR(2),
	MATAIKHOAN VARCHAR(10) UNIQUE
)
GO

-- TRIGGER CHO BẢNG TÀI KHOẢN --
CREATE TRIGGER TRIGGER_TAIKHOAN1
ON TAIKHOAN
FOR INSERT, UPDATE
AS
	DECLARE @MATAIKHOAN VARCHAR(10)
	DECLARE @LOAITAIKHOAN CHAR(2)
	DECLARE @COUNT INT
	SET @COUNT = 0
	SELECT @MATAIKHOAN = MATAIKHOAN, @LOAITAIKHOAN = LOAITAIKHOAN
	FROM INSERTED 

	IF @MATAIKHOAN NOT IN(SELECT MADOITAC FROM DOITAC)
	BEGIN
		SET @COUNT += 1
	END

	IF @MATAIKHOAN NOT IN(SELECT MANV FROM NHANVIEN)
	BEGIN
		SET @COUNT += 1
	END

	IF @MATAIKHOAN NOT IN(SELECT MATAIXE FROM TAIXE)
	BEGIN
		SET @COUNT += 1
	END

	IF @MATAIKHOAN NOT IN(SELECT MAKH FROM KHACHHANG)
	BEGIN
		SET @COUNT += 1
	END

	IF @COUNT >= 4
	BEGIN
		RAISERROR(N'Mã tài khoản không hợp lệ', 16, 1)
	END

	DECLARE @CHECK CHAR(2)
	SELECT @CHECK = LEFT(@MATAIKHOAN, 2)

	IF @CHECK != @LOAITAIKHOAN
	BEGIN
		RAISERROR(N'Loại tài khoản không hợp lệ!!!', 16, 1)
		ROLLBACK
	END
GO

-- NHẬP LIỆU --
-- BẢNG NHÂN VIÊN --
INSERT INTO NHANVIEN(MANV, TENNV) VALUES('NV001', N'Nguyễn Văn A' ) 
INSERT INTO NHANVIEN(MANV, TENNV) VALUES('NV002', N'Nguyễn Văn B' ) 
INSERT INTO NHANVIEN(MANV, TENNV) VALUES('NV003', N'Nguyễn Văn C' ) 
INSERT INTO NHANVIEN(MANV, TENNV) VALUES('NV004', N'Nguyễn Văn D' ) 
INSERT INTO NHANVIEN(MANV, TENNV) VALUES('NV005', N'Nguyễn Văn E' ) 
GO

-- BẢNG NGƯỜI ĐẠI DIỆN --
INSERT INTO NGUOIDAIDIEN(MA_NDD, TEN_NDD) VALUES ('ĐD001', N'Nguyễn Thị A')
INSERT INTO NGUOIDAIDIEN(MA_NDD, TEN_NDD) VALUES ('ĐD002', N'Nguyễn Thị B')
INSERT INTO NGUOIDAIDIEN(MA_NDD, TEN_NDD) VALUES ('ĐD003', N'Nguyễn Thị C')
INSERT INTO NGUOIDAIDIEN(MA_NDD, TEN_NDD) VALUES ('ĐD004', N'Nguyễn Thị D')
INSERT INTO NGUOIDAIDIEN(MA_NDD, TEN_NDD) VALUES ('ĐD005', N'Nguyễn Thị E')
GO

-- BẢNG ĐỐI TÁC --
INSERT INTO DOITAC(MADOITAC, EMAIL, TENQUAN, TP_QUAN, LOAIAMTHUC, DIACHI_KD, SDT, MASOTHUE, MA_NDD)
VALUES ('DT001', 'DT001@GMAIL.COM', 'QUANNGON1', 'TPHCM-Q1', N'PHỞ', N'Đường Nguyễn Văn Cừ', '0123456789', 'MSTHUE001', 'ĐD005')
INSERT INTO DOITAC(MADOITAC, EMAIL, TENQUAN, TP_QUAN, LOAIAMTHUC, DIACHI_KD, SDT, MASOTHUE, MA_NDD)
VALUES ('DT002', 'DT002@GMAIL.COM', 'QUANNGON2', 'TPHCM-Q1', N'BÚN', N'Đường Nguyễn Văn Cừ', '0123456788', 'MSTHUE002', 'ĐD004')
INSERT INTO DOITAC(MADOITAC, EMAIL, TENQUAN, TP_QUAN, LOAIAMTHUC, DIACHI_KD, SDT, MASOTHUE, MA_NDD)
VALUES ('DT003', 'DT003@GMAIL.COM', 'QUANNGON3', 'TPHCM-Q1', N'MIẾN', N'Đường Nguyễn Văn Cừ', '0123456787', 'MSTHUE003', 'ĐD003')
INSERT INTO DOITAC(MADOITAC, EMAIL, TENQUAN, TP_QUAN, LOAIAMTHUC, DIACHI_KD, SDT, MASOTHUE, MA_NDD)
VALUES ('DT004', 'DT004@GMAIL.COM', 'QUANNGON4', 'TPHCM-Q1', N'CHÁO', N'Đường Nguyễn Văn Cừ', '0123456786', 'MSTHUE004', 'ĐD002')
INSERT INTO DOITAC(MADOITAC, EMAIL, TENQUAN, TP_QUAN, LOAIAMTHUC, DIACHI_KD, SDT, MASOTHUE, MA_NDD)
VALUES ('DT005', 'DT005@GMAIL.COM', 'QUANNGON5', 'TPHCM-Q1', N'CƠM', N'Đường Nguyễn Văn Cừ', '0123456785', 'MSTHUE005', 'ĐD001')
GO

-- BẢNG HỢP ĐỒNG -- 
INSERT INTO HOPDONG(MAHOPDONG, PT_HOAHONG, PHIKICHHOAT, TG_HIEULUC, MA_NDD, NV_XULI) 
VALUES ('HD001', 0.4, 1000000, '1/1/2025', 'ĐD001', 'NV005')
INSERT INTO HOPDONG(MAHOPDONG, PT_HOAHONG, PHIKICHHOAT, TG_HIEULUC, MA_NDD, NV_XULI) 
VALUES ('HD002', 0.6, 1000000, '1/1/2025', 'ĐD003', 'NV003')
INSERT INTO HOPDONG(MAHOPDONG, PT_HOAHONG, PHIKICHHOAT, TG_HIEULUC, MA_NDD, NV_XULI) 
VALUES ('HD003', 0.7, 1000000, '1/1/2025', 'ĐD002', 'NV002')
INSERT INTO HOPDONG(MAHOPDONG, PT_HOAHONG, PHIKICHHOAT, TG_HIEULUC, MA_NDD, NV_XULI) 
VALUES ('HD004', 0.4, 1000000, '1/1/2025', 'ĐD005', 'NV001')
INSERT INTO HOPDONG(MAHOPDONG, PT_HOAHONG, PHIKICHHOAT, TG_HIEULUC, MA_NDD, NV_XULI) 
VALUES ('HD005', 0.4, 1000000, '1/1/2025', 'ĐD005', 'NV002')
INSERT INTO HOPDONG(MAHOPDONG, PT_HOAHONG, PHIKICHHOAT, TG_HIEULUC, MA_NDD, NV_XULI) 
VALUES ('HD006', 0.4, 1000000, '1/1/2025', 'ĐD005', 'NV002')
INSERT INTO HOPDONG(MAHOPDONG, PT_HOAHONG, PHIKICHHOAT, TG_HIEULUC, MA_NDD, NV_XULI) 
VALUES ('HD007', 0.4, 1000000, '1/1/2025', 'ĐD005', 'NV002')
INSERT INTO HOPDONG(MAHOPDONG, PT_HOAHONG, PHIKICHHOAT, TG_HIEULUC, MA_NDD, NV_XULI) 
VALUES ('HD008', 0.4, 1000000, '1/1/2025', 'ĐD005', 'NV002')
INSERT INTO HOPDONG(MAHOPDONG, PT_HOAHONG, PHIKICHHOAT, TG_HIEULUC, MA_NDD, NV_XULI) 
VALUES ('HD009', 0.4, 1000000, '1/1/2025', 'ĐD005', 'NV002')
INSERT INTO HOPDONG(MAHOPDONG, PT_HOAHONG, PHIKICHHOAT, TG_HIEULUC, MA_NDD, NV_XULI) 
VALUES ('HD010', 0.4, 1000000, '1/1/2025', 'ĐD005', 'NV002')
INSERT INTO HOPDONG(MAHOPDONG, PT_HOAHONG, PHIKICHHOAT, TG_HIEULUC, MA_NDD, NV_XULI) 
VALUES ('HD011', 0.4, 1000000, '1/1/2025', 'ĐD005', 'NV002')
INSERT INTO HOPDONG(MAHOPDONG, PT_HOAHONG, PHIKICHHOAT, TG_HIEULUC, MA_NDD, NV_XULI) 
VALUES ('HD012', 0.4, 1000000, '1/1/2025', 'ĐD005', 'NV002')
INSERT INTO HOPDONG(MAHOPDONG, PT_HOAHONG, PHIKICHHOAT, TG_HIEULUC, MA_NDD, NV_XULI) 
VALUES ('HD013', 0.4, 1000000, '1/1/2025', 'ĐD005', 'NV002')
INSERT INTO HOPDONG(MAHOPDONG, PT_HOAHONG, PHIKICHHOAT, TG_HIEULUC, MA_NDD, NV_XULI) 
VALUES ('HD014', 0.4, 1000000, '1/1/2025', 'ĐD005', 'NV003')
INSERT INTO HOPDONG(MAHOPDONG, PT_HOAHONG, PHIKICHHOAT, TG_HIEULUC, MA_NDD, NV_XULI) 
VALUES ('HD015', 0.4, 1000000, '1/1/2025', 'ĐD005', 'NV002')
INSERT INTO HOPDONG(MAHOPDONG, PT_HOAHONG, PHIKICHHOAT, TG_HIEULUC, MA_NDD, NV_XULI) 
VALUES ('HD016', 0.4, 1000000, '1/1/2025', 'ĐD005', 'NV002')
INSERT INTO HOPDONG(MAHOPDONG, PT_HOAHONG, PHIKICHHOAT, TG_HIEULUC, MA_NDD, NV_XULI) 
VALUES ('HD017', 0.4, 1000000, '1/1/2025', 'ĐD005', 'NV002')
INSERT INTO HOPDONG(MAHOPDONG, PT_HOAHONG, PHIKICHHOAT, TG_HIEULUC, MA_NDD, NV_XULI) 
VALUES ('HD018', 0.4, 1000000, '1/1/2025', 'ĐD005', 'NV002')
INSERT INTO HOPDONG(MAHOPDONG, PT_HOAHONG, PHIKICHHOAT, TG_HIEULUC, MA_NDD, NV_XULI) 
VALUES ('HD019', 0.4, 1000000, '1/1/2025', 'ĐD005', 'NV002')
INSERT INTO HOPDONG(MAHOPDONG, PT_HOAHONG, PHIKICHHOAT, TG_HIEULUC, MA_NDD, NV_XULI) 
VALUES ('HD020', 0.4, 1000000, '1/1/2025', 'ĐD004', 'NV002')
GO

-- BẢNG TAIKHOAN NGÂN HÀNG --
INSERT INTO TAIKHOAN_NH(SOTAIKHOAN, TENNGANHANG, CHINHANH_NH) VALUES ('TK001','Agribank', N'Thành phố Hồ Chí Minh')
INSERT INTO TAIKHOAN_NH(SOTAIKHOAN, TENNGANHANG, CHINHANH_NH) VALUES ('TK002','Agribank', N'Thành phố Hồ Chí Minh')
INSERT INTO TAIKHOAN_NH(SOTAIKHOAN, TENNGANHANG, CHINHANH_NH) VALUES ('TK001','BIDV', N'Thành phố Hồ Chí Minh')
INSERT INTO TAIKHOAN_NH(SOTAIKHOAN, TENNGANHANG, CHINHANH_NH) VALUES ('TK001','Sacombank', N'Thành phố Hồ Chí Minh')
INSERT INTO TAIKHOAN_NH(SOTAIKHOAN, TENNGANHANG, CHINHANH_NH) VALUES ('TK001','Vietcombank', N'Thành phố Hồ Chí Minh')
GO

-- BẢNG CHI NHÁNH --
INSERT INTO CHINHANH(MACHINHANH, MADOITAC, DC_CHINHANH, GIOMOCUA, GIODONGCUA, TT_CHINHANH, SOTAIKHOAN, TENNGANHANG)
VALUES('CN001', 'DT001', N'Nguyễn Văn Cừ', '7:00:00', '21:00:00', N'bình thường', 'TK001', 'BIDV')
INSERT INTO CHINHANH(MACHINHANH, MADOITAC, DC_CHINHANH, GIOMOCUA, GIODONGCUA, TT_CHINHANH, SOTAIKHOAN, TENNGANHANG)
VALUES('CN002', 'DT001', N'Nguyễn Văn Cừ', '7:00:00', '21:00:00', N'bình thường', 'TK001', 'Agribank')
INSERT INTO CHINHANH(MACHINHANH, MADOITAC, DC_CHINHANH, GIOMOCUA, GIODONGCUA, TT_CHINHANH, SOTAIKHOAN, TENNGANHANG)
VALUES('CN003', 'DT001', N'Nguyễn Văn Cừ', '7:00:00', '22:00:00', N'bình thường', 'TK002', 'Agribank')
INSERT INTO CHINHANH(MACHINHANH, MADOITAC, DC_CHINHANH, GIOMOCUA, GIODONGCUA, TT_CHINHANH, SOTAIKHOAN, TENNGANHANG)
VALUES('CN004', 'DT002', N'Nguyễn Văn Cừ', '7:00:00', '23:00:00', N'bình thường', 'TK001', 'Sacombank')
INSERT INTO CHINHANH(MACHINHANH, MADOITAC, DC_CHINHANH, GIOMOCUA, GIODONGCUA, TT_CHINHANH, SOTAIKHOAN, TENNGANHANG)
VALUES('CN005', 'DT001', N'Nguyễn Văn Cừ', '7:00:00', '23:00:00', N'bình thường', 'TK001', 'Sacombank')
INSERT INTO CHINHANH(MACHINHANH, MADOITAC, DC_CHINHANH, GIOMOCUA, GIODONGCUA, TT_CHINHANH, SOTAIKHOAN, TENNGANHANG)
VALUES('CN006', 'DT001', N'Nguyễn Văn Cừ', '7:00:00', '23:00:00', N'bình thường', 'TK001', 'Sacombank')
INSERT INTO CHINHANH(MACHINHANH, MADOITAC, DC_CHINHANH, GIOMOCUA, GIODONGCUA, TT_CHINHANH, SOTAIKHOAN, TENNGANHANG)
VALUES('CN007', 'DT001', N'Nguyễn Văn Cừ', '7:00:00', '23:00:00', N'bình thường', 'TK001', 'Sacombank')
INSERT INTO CHINHANH(MACHINHANH, MADOITAC, DC_CHINHANH, GIOMOCUA, GIODONGCUA, TT_CHINHANH, SOTAIKHOAN, TENNGANHANG)
VALUES('CN008', 'DT002', N'Nguyễn Văn Cừ', '7:00:00', '23:00:00', N'bình thường', 'TK001', 'Sacombank')
INSERT INTO CHINHANH(MACHINHANH, MADOITAC, DC_CHINHANH, GIOMOCUA, GIODONGCUA, TT_CHINHANH, SOTAIKHOAN, TENNGANHANG)
VALUES('CN009', 'DT003', N'Nguyễn Văn Cừ', '7:00:00', '23:00:00', N'bình thường', 'TK001', 'Sacombank')
INSERT INTO CHINHANH(MACHINHANH, MADOITAC, DC_CHINHANH, GIOMOCUA, GIODONGCUA, TT_CHINHANH, SOTAIKHOAN, TENNGANHANG)
VALUES('CN00', 'DT003', N'Nguyễn Văn Cừ', '6:00:00', '20:00:00', N'tạm nghỉ', 'TK001', 'Vietcombank')
GO

-- BẢNG CT_HOPDONG --
INSERT INTO CT_HOPDONG(MAHOPDONG, MACHINHANH) VALUES('HD001', 'CN001')
INSERT INTO CT_HOPDONG(MAHOPDONG, MACHINHANH) VALUES('HD001', 'CN002')
INSERT INTO CT_HOPDONG(MAHOPDONG, MACHINHANH) VALUES('HD002', 'CN001')
INSERT INTO CT_HOPDONG(MAHOPDONG, MACHINHANH) VALUES('HD003', 'CN001')
INSERT INTO CT_HOPDONG(MAHOPDONG, MACHINHANH) VALUES('HD005', 'CN001')
INSERT INTO CT_HOPDONG(MAHOPDONG, MACHINHANH) VALUES('HD005', 'CN002')
INSERT INTO CT_HOPDONG(MAHOPDONG, MACHINHANH) VALUES('HD006', 'CN002')
INSERT INTO CT_HOPDONG(MAHOPDONG, MACHINHANH) VALUES('HD006', 'CN003')
INSERT INTO CT_HOPDONG(MAHOPDONG, MACHINHANH) VALUES('HD008', 'CN002')
INSERT INTO CT_HOPDONG(MAHOPDONG, MACHINHANH) VALUES('HD009', 'CN002')
INSERT INTO CT_HOPDONG(MAHOPDONG, MACHINHANH) VALUES('HD007', 'CN005')
GO

-- BẢNG MÓN ĂN --
INSERT INTO MONAN(TENMON, MIEUTA, GIA) VALUES(N'Phở bò', N'Thơm ngon, hấp dẫn', 50000)
INSERT INTO MONAN(TENMON, MIEUTA, GIA) VALUES(N'Phở gà', N'Thơm ngon, hấp dẫn', 50000)
INSERT INTO MONAN(TENMON, MIEUTA, GIA) VALUES(N'Bún bò', N'Thơm ngon, hấp dẫn', 50000)
INSERT INTO MONAN(TENMON, MIEUTA, GIA) VALUES(N'Cơm chiên', N'Thơm ngon, hấp dẫn', 50000)
INSERT INTO MONAN(TENMON, MIEUTA, GIA) VALUES(N'Bún riêu', N'Thơm ngon, hấp dẫn', 50000)
INSERT INTO MONAN(TENMON, MIEUTA, GIA) VALUES(N'Gà rán', N'Thơm ngon, hấp dẫn', 50000)
INSERT INTO MONAN(TENMON, MIEUTA, GIA) VALUES(N'Hủ tiếu', N'Thơm ngon, hấp dẫn', 50000)
INSERT INTO MONAN(TENMON, MIEUTA, GIA) VALUES(N'Mì khô', N'Thơm ngon, hấp dẫn', 50000)
INSERT INTO MONAN(TENMON, MIEUTA, GIA) VALUES(N'Mì sợi', N'Thơm ngon, hấp dẫn', 50000)
INSERT INTO MONAN(TENMON, MIEUTA, GIA) VALUES(N'Cơm bò', N'Thơm ngon, hấp dẫn', 50000)
INSERT INTO MONAN(TENMON, MIEUTA, GIA) VALUES(N'Gà luộc', N'Thơm ngon, hấp dẫn', 50000)
INSERT INTO MONAN(TENMON, MIEUTA, GIA) VALUES(N'Cháo', N'Thơm ngon, hấp dẫn', 50000)
GO

-- BẢNG THỰC ĐƠN --
INSERT INTO THUCDON(MACHINHANH, TENMONAN) VALUES('CN001', N'Phở bò')
INSERT INTO THUCDON(MACHINHANH, TENMONAN) VALUES('CN001', N'Bún bò')
INSERT INTO THUCDON(MACHINHANH, TENMONAN) VALUES('CN001', N'Phở gà')
INSERT INTO THUCDON(MACHINHANH, TENMONAN) VALUES('CN001', N'Mì sợi')
INSERT INTO THUCDON(MACHINHANH, TENMONAN) VALUES('CN001', N'Mì khô')
INSERT INTO THUCDON(MACHINHANH, TENMONAN) VALUES('CN001', N'Bún riêu')
INSERT INTO THUCDON(MACHINHANH, TENMONAN) VALUES('CN001', N'Cơm bò')
INSERT INTO THUCDON(MACHINHANH, TENMONAN) VALUES('CN001', N'Cơm chiên')
INSERT INTO THUCDON(MACHINHANH, TENMONAN) VALUES('CN002', N'Cháo')
INSERT INTO THUCDON(MACHINHANH, TENMONAN) VALUES('CN002', N'Mì sợi')
INSERT INTO THUCDON(MACHINHANH, TENMONAN) VALUES('CN002', N'Mì khô')
INSERT INTO THUCDON(MACHINHANH, TENMONAN) VALUES('CN002', N'Phở gà')
INSERT INTO THUCDON(MACHINHANH, TENMONAN) VALUES('CN002', N'Phở bò')
INSERT INTO THUCDON(MACHINHANH, TENMONAN) VALUES('CN003', N'Phở bò')
INSERT INTO THUCDON(MACHINHANH, TENMONAN) VALUES('CN004', N'Phở bò')
GO

-- BẢNG TÙY CHỌN MÓN --
INSERT INTO TUYCHONMON(TENMON, TUYCHON) VALUES(N'Phở bò', N'Thêm bò')
INSERT INTO TUYCHONMON(TENMON, TUYCHON) VALUES(N'Phở bò', N'Bò tái')
INSERT INTO TUYCHONMON(TENMON, TUYCHON) VALUES(N'Phở bò', N'Ít bánh phở')
INSERT INTO TUYCHONMON(TENMON, TUYCHON) VALUES(N'Phở gà', N'Thêm gà')
INSERT INTO TUYCHONMON(TENMON, TUYCHON) VALUES(N'Bún bò', N'Thêm bò')
INSERT INTO TUYCHONMON(TENMON, TUYCHON) VALUES(N'Gà rán', N'Ít dầu')
GO

-- BẢNG KHÁCH HÀNG --
INSERT INTO KHACHHANG(MAKH, HOTEN, SDT, DIACHI, EMAIL)
VALUES('KH001', N'Nguyễn Văn Một', '0123654987', N'Nguyễn Văn Cừ', 'KH001@GMAIL.COM')
INSERT INTO KHACHHANG(MAKH, HOTEN, SDT, DIACHI, EMAIL)
VALUES('KH002', N'Nguyễn Văn Hai', '0123654985', N'Nguyễn Văn Cừ', 'KH002@GMAIL.COM')
INSERT INTO KHACHHANG(MAKH, HOTEN, SDT, DIACHI, EMAIL)
VALUES('KH003', N'Nguyễn Thị Ba', '0123654986', N'Nguyễn Văn Cừ', 'KH003@GMAIL.COM')
INSERT INTO KHACHHANG(MAKH, HOTEN, SDT, DIACHI, EMAIL)
VALUES('KH004', N'Nguyễn Văn Bốn', '0123654988', N'Nguyễn Văn Cừ', 'KH004@GMAIL.COM')
INSERT INTO KHACHHANG(MAKH, HOTEN, SDT, DIACHI, EMAIL)
VALUES('KH005', N'Nguyễn Thị Năm', '0123654989', N'Nguyễn Văn Cừ', 'KH005@GMAIL.COM')
GO

-- BẢNG TÀI XẾ -- 
INSERT INTO TAIXE(MATAIXE, HOTEN, CMND, SDT, DIACHI, EMAIL, BIENSOXE, PHITHUECHAN, KHUVUCHD, SOTAIKHOAN, TENNGANHANG)
VALUES('TX001', N'Nguyễn Văn Tài', '076203228', '0326456789', N'An Dương Vương', 'TX001@GMAIL.COM', '99-H77060', 500000, N'An Dương Vương', 'TK002', 'Agribank')
INSERT INTO TAIXE(MATAIXE, HOTEN, CMND, SDT, DIACHI, EMAIL, BIENSOXE, PHITHUECHAN, KHUVUCHD, SOTAIKHOAN, TENNGANHANG)
VALUES('TX002', N'Nguyễn Văn Xế', '076205228', '0326456783', N'An Dương Vương', 'TX002@GMAIL.COM', '99-G77060', 500000, N'An Dương Vương', 'TK002', 'Agribank')
INSERT INTO TAIXE(MATAIXE, HOTEN, CMND, SDT, DIACHI, EMAIL, BIENSOXE, PHITHUECHAN, KHUVUCHD, SOTAIKHOAN, TENNGANHANG)
VALUES('TX003', N'Nguyễn Xế Tài', '076203238', '0326456782', N'Trần Phú', 'TX003@GMAIL.COM', '99-H77050', 500000, N'An Dương Vương', 'TK001', 'Agribank')
GO

-- BẢNG ĐƠN HÀNG --
INSERT INTO DONHANG(MADONHANG, CHINHANH, KHACHHANG, TAIXEXULI, NGAYLAP, HINHTHUCTHANHTOAN, TINHTRANG, PHIVANCHUYEN, TONGTIEN)
VALUES ('DH001', 'CN001', 'KH001', 'TX002', '03/12/2022', 'VNPAY', N'Chờ Nhận', 18000, 250000)
INSERT INTO DONHANG(MADONHANG, CHINHANH, KHACHHANG, TAIXEXULI, NGAYLAP, HINHTHUCTHANHTOAN, TINHTRANG, PHIVANCHUYEN, TONGTIEN)
VALUES ('DH002', 'CN001', 'KH002', 'TX002', '03/12/2022', 'VNPAY', N'Chờ Nhận', 18000, 250000)
INSERT INTO DONHANG(MADONHANG, CHINHANH, KHACHHANG, TAIXEXULI, NGAYLAP, HINHTHUCTHANHTOAN, TINHTRANG, PHIVANCHUYEN, TONGTIEN)
VALUES ('DH003', 'CN003', 'KH002', 'TX002', '03/12/2022', 'VNPAY', N'Chờ Nhận', 18000, 250000)
INSERT INTO DONHANG(MADONHANG, CHINHANH, KHACHHANG, TAIXEXULI, NGAYLAP, HINHTHUCTHANHTOAN, TINHTRANG, PHIVANCHUYEN, TONGTIEN)
VALUES ('DH004', 'CN004', 'KH005', 'TX003', '03/12/2022', N'Tiền mặt', N'Đang chuẩn bị', 18000, 500000)
INSERT INTO DONHANG(MADONHANG, CHINHANH, KHACHHANG, TAIXEXULI, NGAYLAP, HINHTHUCTHANHTOAN, TINHTRANG, PHIVANCHUYEN, TONGTIEN)
VALUES ('DH005', 'CN001', 'KH005', 'TX003', '03/12/2022', N'Tiền mặt', N'Đang chuẩn bị', 18000, 100000)
INSERT INTO DONHANG(MADONHANG, CHINHANH, KHACHHANG, TAIXEXULI, NGAYLAP, HINHTHUCTHANHTOAN, TINHTRANG, PHIVANCHUYEN, TONGTIEN)
VALUES ('DH006', 'CN001', 'KH002', 'TX003', '03/12/2022', N'VNPAY', N'Chờ Nhận', 18000, 500000)
INSERT INTO DONHANG(MADONHANG, CHINHANH, KHACHHANG, TAIXEXULI, NGAYLAP, HINHTHUCTHANHTOAN, TINHTRANG, PHIVANCHUYEN, TONGTIEN)
VALUES ('DH007', 'CN001', 'KH002', 'TX003', '03/12/2022', N'VNPAY', N'Chờ Nhận', 18000, 500000)
INSERT INTO DONHANG(MADONHANG, CHINHANH, KHACHHANG, TAIXEXULI, NGAYLAP, HINHTHUCTHANHTOAN, TINHTRANG, PHIVANCHUYEN, TONGTIEN)
VALUES ('DH008', 'CN001', 'KH002', 'TX003', '03/12/2022', N'VNPAY', N'Chờ Nhận', 18000, 500000)
INSERT INTO DONHANG(MADONHANG, CHINHANH, KHACHHANG, TAIXEXULI, NGAYLAP, HINHTHUCTHANHTOAN, TINHTRANG, PHIVANCHUYEN, TONGTIEN)
VALUES ('DH009', 'CN002', 'KH002', 'TX003', '03/12/2022', N'Tiền mặt', N'Chờ Nhận', 18000, 500000)
INSERT INTO DONHANG(MADONHANG, CHINHANH, KHACHHANG, TAIXEXULI, NGAYLAP, HINHTHUCTHANHTOAN, TINHTRANG, PHIVANCHUYEN, TONGTIEN)
VALUES ('DH010', 'CN002', 'KH002', 'TX003', '03/12/2022', N'VNPAY', N'Chờ Nhận', 18000, 500000)
INSERT INTO DONHANG(MADONHANG, CHINHANH, KHACHHANG, TAIXEXULI, NGAYLAP, HINHTHUCTHANHTOAN, TINHTRANG, PHIVANCHUYEN, TONGTIEN)
VALUES ('DH011', 'CN002', 'KH002', 'TX003', '03/12/2022', N'Tiền mặt', N'Chờ Nhận', 18000, 500000)
INSERT INTO DONHANG(MADONHANG, CHINHANH, KHACHHANG, TAIXEXULI, NGAYLAP, HINHTHUCTHANHTOAN, TINHTRANG, PHIVANCHUYEN, TONGTIEN)
VALUES ('DH012', 'CN008', 'KH001', 'TX003', '03/12/2022', N'VNPAY', N'Chờ Nhận', 18000, 100000)
INSERT INTO DONHANG(MADONHANG, CHINHANH, KHACHHANG, TAIXEXULI, NGAYLAP, HINHTHUCTHANHTOAN, TINHTRANG, PHIVANCHUYEN, TONGTIEN)
VALUES ('DH013', 'CN007', 'KH001', 'TX003', '03/12/2022', N'Tiền mặt', N'Chờ Nhận', 18000, 100000)
INSERT INTO DONHANG(MADONHANG, CHINHANH, KHACHHANG, TAIXEXULI, NGAYLAP, HINHTHUCTHANHTOAN, TINHTRANG, PHIVANCHUYEN, TONGTIEN)
VALUES ('DH014', 'CN006', 'KH001', 'TX003', '03/12/2022', N'VNPAY', N'Chờ Nhận', 18000, 100000)
INSERT INTO DONHANG(MADONHANG, CHINHANH, KHACHHANG, TAIXEXULI, NGAYLAP, HINHTHUCTHANHTOAN, TINHTRANG, PHIVANCHUYEN, TONGTIEN)
VALUES ('DH015', 'CN005', 'KH001', 'TX003', '03/12/2022', N'Tiền mặt', N'Chờ Nhận', 18000, 100000)
GO

-- BẢNG CT_DONHANG --
INSERT INTO CT_DONHANG(MADONHANG, MACHINHANH, TENMON, SOLUONG) VALUES('DH002', 'CN001', N'Phở bò', 5)
INSERT INTO CT_DONHANG(MADONHANG, MACHINHANH, TENMON, SOLUONG) VALUES('DH003', 'CN003', N'Phở bò', 5)
INSERT INTO CT_DONHANG(MADONHANG, MACHINHANH, TENMON, SOLUONG) VALUES('DH004', 'CN004', N'Phở gà', 10)
INSERT INTO CT_DONHANG(MADONHANG, MACHINHANH, TENMON, SOLUONG) VALUES('DH005', 'CN001', N'Phở gà', 10)
INSERT INTO CT_DONHANG(MADONHANG, MACHINHANH, TENMON, SOLUONG) VALUES('DH006', 'CN001', N'Phở gà', 10)
INSERT INTO CT_DONHANG(MADONHANG, MACHINHANH, TENMON, SOLUONG) VALUES('DH007', 'CN001', N'Phở gà', 10)
INSERT INTO CT_DONHANG(MADONHANG, MACHINHANH, TENMON, SOLUONG) VALUES('DH008', 'CN001', N'Phở gà', 10)
INSERT INTO CT_DONHANG(MADONHANG, MACHINHANH, TENMON, SOLUONG) VALUES('DH009', 'CN002', N'Phở gà', 10)
INSERT INTO CT_DONHANG(MADONHANG, MACHINHANH, TENMON, SOLUONG) VALUES('DH010', 'CN002', N'Phở gà', 10)
INSERT INTO CT_DONHANG(MADONHANG, MACHINHANH, TENMON, SOLUONG) VALUES('DH011', 'CN002', N'Phở gà', 10)
INSERT INTO CT_DONHANG(MADONHANG, MACHINHANH, TENMON, SOLUONG) VALUES('DH012', 'CN008', N'Phở gà', 10)
INSERT INTO CT_DONHANG(MADONHANG, MACHINHANH, TENMON, SOLUONG) VALUES('DH013', 'CN007', N'Phở gà', 10)
INSERT INTO CT_DONHANG(MADONHANG, MACHINHANH, TENMON, SOLUONG) VALUES('DH014', 'CN006', N'Phở gà', 10)
INSERT INTO CT_DONHANG(MADONHANG, MACHINHANH, TENMON, SOLUONG) VALUES('DH015', 'CN005', N'Phở gà', 10)
INSERT INTO CT_DONHANG(MADONHANG, MACHINHANH, TENMON, SOLUONG) VALUES('DH001', 'CN001', N'Phở gà', 10)
GO

-- BẢNG BẢNG ĐÁNH GIÁ --
INSERT INTO BANGDANHGIA(MABANG, MAKH, TENMON, LIKEE, COMMENT, RATE)
VALUES('BDG001', 'KH002', N'Phở bò', 1, N'Ngon vải', 5)
INSERT INTO BANGDANHGIA(MABANG, MAKH, TENMON, LIKEE, COMMENT, RATE)
VALUES('BDG002', 'KH003', N'Phở bò', 1, N'Dở tệ', 5)
INSERT INTO BANGDANHGIA(MABANG, MAKH, TENMON, LIKEE, COMMENT, RATE)
VALUES('BDG003', 'KH001', N'Phở gà', 1, N'Tuyệt!', 5)
INSERT INTO BANGDANHGIA(MABANG, MAKH, TENMON, LIKEE, COMMENT, RATE)
VALUES('BDG001', 'KH002', N'Gà rán', 1, N'Ngon vải', 5)
INSERT INTO BANGDANHGIA(MABANG, MAKH, TENMON, LIKEE, COMMENT, RATE)
VALUES('BDG005', 'KH002', N'Phở bò', 1, N'Ngon vải', 5)
GO

-- BẢNG TÀI KHOẢN --
INSERT INTO TAIKHOAN VALUES ('doitac01', '123456789', 'DT', 'DT001')
INSERT INTO TAIKHOAN VALUES ('taixe01', '123456789', 'TX', 'TX001')
INSERT INTO TAIKHOAN VALUES ('taixe02', '123456789', 'TX', 'TX002')
INSERT INTO TAIKHOAN VALUES ('khachhang01', '123456789', 'KH', 'KH001')
INSERT INTO TAIKHOAN VALUES ('khachhang02', '123456789', 'KH', 'KH002')
INSERT INTO TAIKHOAN VALUES ('nhanvien01', '123456789', 'NV', 'NV001')
INSERT INTO TAIKHOAN VALUES ('nhanvien02', '123456789', 'NV', 'NV002')
INSERT INTO TAIKHOAN VALUES ('nhanvien03', '123456789', 'NV', 'NV003')
INSERT INTO TAIKHOAN VALUES ('doitac02', '123456789', 'DT', 'DT002')
GO
